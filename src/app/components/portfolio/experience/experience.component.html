<div class="work-card" *ngIf="experience">
  <div class="work-card-content">
    <div class="work-header">
      <div class="work-title-section">
        <div class="work-title-row">
          <h3 class="work-title">{{ experience.title }}</h3>
          <span class="badge" [ngClass]="getBadgeClass(experience.employmentType)">{{ experience.employmentType }}</span>
        </div>
        <p class="work-company">{{ experience.company }}</p>
        <div class="work-date">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
          {{ experience.startDate | date:'MMM yyyy' }} - {{ experience.isCurrent ? 'Present' : (experience.endDate | date:'MMM yyyy') }}
        </div>
      </div>
    </div>
    <p class="work-description">{{ experience.description }}</p>

    <div class="photo-grid" *ngIf="experience.photos && experience.photos.length > 0">
      <div class="photo-item" *ngFor="let photo of experience.photos" (click)="openImage(photo.imageUrl)">
        <img [src]="photo.imageUrl" [alt]="photo.caption">
      </div>
    </div>

    <div class="work-details" [class.show]="showDetails">
      <div class="achievements" *ngIf="experience.achievements && experience.achievements.length > 0">
        <h4 class="details-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8V6a2 2 0 0 0-2-2H7.83a2 2 0 0 0-1.42.59L3.59 7.41a2 2 0 0 0-.59 1.42V18a2 2 0 0 0 2 2h2"/><path d="M12 18h5a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-1"/><path d="M12 8h-1a2 2 0 0 0-2 2v2"/><circle cx="18" cy="15" r="3"/><path d="m20.6 17.6-.6-.6"/><path d="M12 8V6a2 2 0 0 1 2-2h3.17a2 2 0 0 1 1.41.59l2.83 2.83a2 2 0 0 1 .59 1.41V13"/><path d="M8 22v-2a2 2 0 0 0-2-2H4"/><path d="M20 22v-2a2 2 0 0 1 2-2h.5"/></svg>
          Key Achievements
        </h4>
        <ul>
          <li *ngFor="let achievement of experience.achievements">{{ achievement }}</li>
        </ul>
      </div>

      <div class="technologies" *ngIf="experience.technologiesUsed && experience.technologiesUsed.length > 0">
        <h4 class="details-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 14 4-4"/><path d="M3.34 19a10 10 0 1 1 17.32 0"/><path d="m12 20 4-4"/></svg>
          Technologies Used
        </h4>
        <div class="tech-tags">
          <span class="tech-tag" *ngFor="let tech of experience.technologiesUsed">{{ tech }}</span>
        </div>
      </div>

      <div class="extra-links" *ngIf="experience.extra">
        <a *ngIf="experience.extra['modelURL']" (click)="show3DModel(experience.extra['modelURL'])" target="_blank" class="model-link">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>
          View 3D Model
        </a>
        <a *ngIf="experience.extra['redirect']" [href]="experience.extra['redirect']" target="_blank" class="model-link">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" x2="21" y1="14" y2="3"/></svg>
          Visit Site
        </a>
      </div>
    </div>

    <button class="toggle-button" (click)="toggleDetails()">
      <span>{{ showDetails ? 'Show Less' : 'Show More Details' }}</span>
    </button>
  </div>
</div>
